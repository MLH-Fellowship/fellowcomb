# Migration `20201120154522`

This migration has been generated by --replace-all at 11/20/2020, 11:45:22 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Cluster" (
    "id" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "_ClusterToUser" (
    "A" TEXT NOT NULL,
    "B" TEXT NOT NULL
)

CREATE UNIQUE INDEX "_ClusterToUser_AB_unique" ON "_ClusterToUser"("A", "B")

CREATE INDEX "_ClusterToUser_B_index" ON "_ClusterToUser"("B")

ALTER TABLE "_ClusterToUser" ADD FOREIGN KEY("A")REFERENCES "Cluster"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "_ClusterToUser" ADD FOREIGN KEY("B")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201120154522
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,39 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model User {
+  id                  String        @id @default(cuid())
+  username            String        @unique
+  name                String
+  pictureURL          String?
+  createdAt           DateTime      @default(now())
+  updatedAt           DateTime      @default(now())
+  deletedAt           DateTime?
+  github_url          String
+  github_followers    Int
+  github_following    Int
+  github_access_code  String
+  linkedin            String?
+  calendly            String?
+  discord_id          String?
+  discord_access_code String?
+  UserSessions        UserSession[]
+  clusters            Cluster[]
+}
+
+model UserSession {
+  id     String @id @default(cuid())
+  user   User   @relation(fields: [userId], references: [id])
+  userId String
+}
+
+model Cluster {
+  id    String @id @default(cuid())
+  users User[]
+}
```


